package cn.com.sparknet.nclk.controller;

import java.io.PrintWriter;
import java.util.HashMap;
import java.util.Map;

import javax.annotation.Resource;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import com.alibaba.fastjson.JSONObject;

import cn.com.sparknet.common.util.JsonUtil;
import cn.com.sparknet.common.util.StringUtil;
import cn.com.sparknet.nclk.service.DashboardService;

/**
 * 首页echarts数据
 * @author lirj
 *
 */
@Controller
@RequestMapping("/DashboardController")
public class DashboardController {
	
	@Resource
	private DashboardService dashboardService;
	
	@ResponseBody
	@RequestMapping("/getJsonErrorType.do")
	public Map<String, String> getJsonErrorType(String num, String type){
		Map<String, String> mapLineDataX=new HashMap<String, String>();
		mapLineDataX.put("lineDataX", "09:30");
		mapLineDataX.put("lineDataX", "09:31");
		mapLineDataX.put("lineDataX", "09:32");
		
		String lineDataX = JsonUtil.mapToJson(mapLineDataX);
		
		Map<String, Integer> lineDataY=new HashMap<String, Integer>();
		lineDataY.put("lineDataY", 10);
		lineDataY.put("lineDataY", 0);
		lineDataY.put("lineDataY", 0);
		
		
		return mapLineDataX;
	}
	
	@ResponseBody
	@RequestMapping("/jsonDataX.do")
	public String jsonDataX(String errorType){
		Map<String, String> mapLineDataX=new HashMap<String, String>();
		mapLineDataX.put("lineDataX", "09:30");
		mapLineDataX.put("lineDataX", "09:31");
		mapLineDataX.put("lineDataX", "09:32");
		
		String lineDataX = JsonUtil.mapToJson(mapLineDataX);
		return lineDataX;
	}
	
	@ResponseBody
	@RequestMapping("/jsonData.do")
	public String jsonData(String errorType){
		Map<String, Integer> mapLineDataX=new HashMap<String, Integer>();
		mapLineDataX.put("09:30", 10);
		mapLineDataX.put("09:31", 0);
		mapLineDataX.put("09:32", 0);
		
		String lineDataX = JsonUtil.mapToJson(mapLineDataX);
		
		return lineDataX;
	}
	
	@ResponseBody
	@RequestMapping("/jsonTest.do")
	public String jsonTest(HttpServletRequest request,HttpServletResponse response){
		// json test， 数据库直接传值
		//获取getJSON方法传递的参数callBack
		String errorType = StringUtil.nullToEmpty(request.getParameter("errorType"));
		//查询所有错误类型
		return dashboardService.jsonErrorType(errorType);
	}
	
	@ResponseBody
	@RequestMapping("/jsonTestForEcharts.do")
	public String jsonTestForEcharts(HttpServletRequest request,HttpServletResponse response){
		//echarts - pie
		//获取getJSON方法传递的参数callBack
		String errorType = StringUtil.nullToEmpty(request.getParameter("errorType"));
		//查询所有错误类型
		return dashboardService.jsonErrorTypeForEcharts(errorType);
	}
	
	@ResponseBody
	@RequestMapping("/jsonLine.do")
	public String jsonLine(HttpServletRequest request,HttpServletResponse response){
		//echarts - pie
		//获取getJSON方法传递的参数callBack
		String errorType = StringUtil.nullToEmpty(request.getParameter("errorType"));
		//查询所有错误类型
		return dashboardService.jsonLine(errorType);
	}
}
